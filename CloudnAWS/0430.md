# DB

1. RDS
    - 클라우드에서 실행하는 격리된 데이터베이스 환경
    - 이미 DB가 포함되어 설치할 필요가 없음
    - RDS는 serverless가 아님
    - AWS 명령줄 도구, Amazon RDS API 작업 또는 AWS Management Console을 사용해 간단히 DB 인스턴스를 만들고 수정할 수 있음
    - 직접 시스템 로그인 불가능
    - 실행 방법
        1. RDS 화면 들어가기
        2. 데이터베이스 생성 클릭
        3. 퍼블릭 엑세스를 예로 해야 외부 클라이언트 툴로 접속 가능
        4. 생성 후 보안그룹 편집 inbound에서 mysql 접속 ip설정 필요
    - 스냅샷 기능을 활용하여 복구 가능
    - 파라미터 그룹에 DB의 파라미터 설정 가능

2. NoSQL
    - Document DB
        - MongoDB API 워크로드의 완전 관리 및 유연한 확장이 가능한 문서전용 DB
        - Amazon DocumentDB에서는 스토리지 및 컴퓨팅 분리 조정 가능
        - Amazon DocumentDB는 99.99%%의 가용성을 위해 설계되였으며 6개의 데이터 복사본을 3개의 AWS 가용영역에 복제
        - JSON 데이터
        - 유연한 인덱싱
    - MongoDB
        - Document 지향 DB
        - 데이터 중복 발생하지만 접근성과 가시성 좋다
        - 설계가 어렵지만 유연해서 Apllication에 맞게 데이터 수용 가능
        - Scale-out이 쉽다
        - 확장시 Application 변경이 필요 없다
        - RDBMS의 Talbe : Collection, Row : Document, Column : Field
    - Dynamo DB
        - Key-Value 기반 NoSQL DB 서비스
        - Auto-scaling으로 데이터가 쌓일 때 내부적으로 저장소 관리를 하기 때문에 용량 걱정이 없다
        - 유휴시 암호화 제공하여 데이터 보호와 관련도니 운영 부담 및 복잡성을 제거한다
        - 원하는 양의 데이터를 저장 및 검색하고 어느 수준의 요청 트래픽토 처리할 수 있는 DB 테이블을 생성할 수 있다
        - Management Console을 사용해 리소스 사용률 및 성능 지표를 모니터링 할 수 있다. 
        - 온디멘드 백업기능 제공
        - 테이블 생성시 스키마 생성 필요 없음
        - RDBMS의 Row : items, partition key와 sort key가 있음

3. Network
- Route53
    - DNS 웹서비스. 도메인 등록, DNS 라우팅, 상태확인을 조합하여 실행할 수 있다
    - public host zone과 private host zone 존재
    - DNS + 모니터링 + L4 + GSLB
    - 사용 방법
        1. 도매인 구매
            - 도메인 이름 입력
            - 금액 지불
        2. 도매인을 구매하였을 때
            - DNS관리 > 호스팅영역 생성
            - 구매한 도매인 입력
            - 호스팅 영역 선택
            - 웹 호스팅 업체에 값/트래핑 라우팅 대상으로 네임서버 변경
        3. 서브도메인 설정
            - 호스팅 영역 > 도메인 클릭
            - 레코드 생성 클릭
            - 단순 라우팅
            - 레코드 정의에 서브도메인 지정
            - 엔드포인트 연결
- Elastic Load Balancing(ELB)
    - 애플리케이션을 지원하는 리소스 풀 전체에 네트워크 트래픽을 균등하게 배포하는 방법
    - L4 (전송계층)
        - 데이터를 보지 않고 패킷 레벨에서만 로드 분산
        - 빠르고 효율이 좋음
        - 데이터 복호화 필요가 없어 안전
        - L7보다 저렴함
        - 섬세한 라우팅이 불가능
        - IP가 수시로 변경될 때 연속적인 서비스 제공 어려움
    - L7 (응용계층)
        - 상위 계층에서 분산하기에 섬세한 라우팅 가능
        - 캐싱 기능 제공
        - 비정상적 트래픽을 사전에 필터링 할 수 있어 안정성 높음
        - 패킷 내용을 복호화해야해 비용이 높음
        - 클라이언트가 로드밸련서와 인증서를 공유해 공격자가 로드밸런서를 통해 클라이언트에 접근할 보안상의 위험 존재
    - 대상 그룹을 등록해야 함
    - 이용 방법
        1. EC2 들어감
        2. 로드밸런싱 > 대상 그룹 클릭
        3. 대상 그룹 생성 클릭
        4. 임의이 이름 입력
        5. VPC 선택
        6. 완료 후 아래 대상에 편집
        7. 원하는 EC2를 선택 후 등록
        8. 로드 밸런서 생성 클릭
        9. 애플리케이션 로드 밸런서 선택
        10. 이름 입력
        11. 인터넷 경계 선택
        12. SSL인증서가 있을 때 HTTPS 선택 or HTTP
        13. VPC 선택
        14. 인증서 선택
        15. 보안그룹 선택
        16. 생성

4. AWS Certification Manager(ACM)
    - SSL, https의 인증서를 발급하고 관리하는 서비스
    - SSL/TLS 인증서를 구매, 업로드 및 갱신하는데 드는 시간 소모적인 수동 프로세스를 대신 처리
    - 외부에서 구매 해서 등록도 가능하고 직접 구매도 가능
    - ACM 통합 서비스를 위한 무료 퍼블릭 인증서
    - 인증서 만료 및 갱신에 대한 안내를 해줌
    - 손쉽게 인증서 받을 수 있음
    - SSL 인증서
        - 공개키와 개인키 키 쌍을 갖고 있음
        - 키들이 함께 작용하여 연결 수립
        - 주체라는 것을 포함하고 이는 인증서/웹사이트 소유자의 ID
        - 인증서를 얻으려면 서버에서 인증서 서명 요청(CSR)을 생성해야 함
        - 위 과정에서 개인키 공개키 생성
        - SSL 인증서 발급자(인증기관, CA)에게 보내는 CSR 데이터 파일에 공개키 포함
    - 이용 방법
        1. 인증서 요청 클릭
        2. 퍼블릭 인증서 요청 선택
        3. 구매한 도메인 입력, *.도메인.co.kr 형태로 서브 도메인 추가
        4. 검증방법 선택 (DNS 검증 권장)
        5. 요청
        6. 성공되면 Route53 > 레코드에서 인증서 발급 가능
        7. EC2 > 로드밸런서 > 로드밸런서 생성 > HTTPS 생성 > 리스너 HTTPS 선택 > 인증서 선택 하면 HTTPS 사용 가능
        8. CloudFront > 배포 생성 > 도메인 입력 > HTTPS 선택 > 사용자 정의 SSL인증서에서 인증서 선택
    - 외부에서 가져올 때 인증서 가져오기로 가져오기

5. CloudFront
    - 콘텐츠 전송 네트워크(CDN) 서비스
        - 데이터 사용량이 많은 영상이나 이미지를 사용하는 애플리케이션의 웹 페이지 로드 속도를 높이는 상호 연결된 서버 네트워크
        - 정적 콘텐츠와 동적 콘텐츠로 나뉨
        - 캐싱 / 동적 가속 / 엣지 로직 계산 등의 기능이 포함
        - Original Server와 DNS 사이에 존재하는 네트워크
    - 대기시간 감소, 보안향상, 비용 절감, 사용자 정의 전송
    - 이용 방법
        1. 배포 생성 클릭
        2. 도메인 입력(프론트를 구성한 S3 선택)
        3. 뷰어에 HTTP/HTTPS 방식 선택
        4. WAF : 특정 IP를 접속하지 못하게 설정 가능
        5. 인증서 등록. 인증서 위치 확인 필요

6. Virtual Private Cloud(VPC)
- 사용자가 정의한 가상 네트워크
- VPC 내부 서브넷 구성이 가능. VPC의 IP 주소 범위, AWS 리소스 배포 가능
- 자체 데이터 센터에서 운영하는 기존 네트워크와 아주 유사한 가상 네트워크
- IP 주소 지정 가능함
- 라우팅 테이블을 사용하여 서브넷 또는 게이트웨이의 네트워크 트래픽이 전달되는 위치를 결정
- 게이트웨이는 VPC를 다른 네트워크게 연결할 때 사용
- 엔드보인트를 사용하여 게이트웨이 또는 NAT 장치를 사용하지 않고 AWS비공개 서비스에 바로 연결
- VPC 피어링 연결로 두 리소스간 트래핑 라우팅 함
- 트래픽을 미러링 할 수 있다
- Transit Gateway를 통해 VPC, VPN 연결 및 AWS Direct Connect 간에 트래픽을 라우팅함
- VPC 흐름을 로그하고 VPN 가능
- CIDR(Classless Inter-Domain Rounting, 사이더) : 클래스 없는 도메인 간 라우팅 기법
    - IP 주소는 2진법으로 36자리. IP주소 / 숫자 형태로 작성하여 숫자 자리 수 만큼 네트워크 영역, 뒤가 호스팅 영역
    - 172.16.0.0/24 일 때 36자리 중 24자리까지 네트워크 영역이므로 1-254까지 IP주소 사용 가능
    - 172.16.0.0/26 일 때 36자리 중 26자리까지 네트워크 영역이므로 1-62까지 IP주소 사용 가능
- 이용 방법 1
    1. VPC 검색 후 VPC 생성 클릭
    2. VPC 선택 후 이름 작성
    3. CIDR 설정
    4. 생성 클릭
    5. 서브넷 생성 클릭
- 이용방법 2
    1. VPC 등 선택
    2. 가용 영역 수 선택
    3. 퍼블릭, 프라이빗 서브넷 수 선택
